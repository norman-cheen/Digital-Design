library ieee;
use ieee.std_logic_1164.all;

package dataConsume_pack is

	  type STATE_TYPE is
		(
			INIT,
			REQ_DATA,
			WAIT_DATA,
			DATA_VALID,
			UPDATE_REG
		);
		
end dataConsume_pack;		

library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_unsigned."+";
use ieee.std_logic_unsigned."-";
use ieee.std_logic_unsigned."=";
use work.dataConsume_pack.all;
use work.common_pack.all;

entity dataConsume is
	port (
	  clk:		in std_logic;
		reset:		in std_logic; -- synchronous reset
		start: in std_logic; -- goes high to signal data transfer
		numWords_bcd: in BCD_ARRAY_TYPE(2 downto 0);
		ctrlIn: in std_logic;
		ctrlOut: out std_logic;
		data: in std_logic_vector(7 downto 0);
		dataReady: out std_logic;
		byte: out std_logic_vector(7 downto 0);
		seqDone: out std_logic;
		maxIndex: out BCD_ARRAY_TYPE(2 downto 0);
		dataResults: out CHAR_ARRAY_TYPE(0 to RESULT_BYTE_NUM-1) -- index 3 holds the peak
	);
end dataConsume;

`protect begin_protected
`protect version = 1
`protect author = "IP Provider"
`protect encrypt_agent = "ModelSim" , encrypt_agent_info = "2020.3"
`protect key_keyowner = "MTI" , key_keyname = "MGC-DVT-MTI"
`protect key_method = "rsa"
`protect encoding = ( enctype = "base64" , line_length = 64 , bytes = 128 )
`protect key_block
hpH9GIuj4GBGmNWei8E4tZfTJdBrMje4A2Bp/m6XLFkyRAMY7sLXRBohdn3M4xxS
RvrEiGLiFJJZc974JoRRHLZSHTFlzHRc0M7Z+Fw6bzdjMOEMQHiyqAUkMsdbBKnS
htg/UaNoq+cTxgNUwZv1iEWiBmO9VuV+M1Hg40VStRg=
`protect data_method = "aes128-cbc"
`protect encoding = ( enctype = "base64" , line_length = 64 , bytes = 6704 )
`protect data_block
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
`protect end_protected